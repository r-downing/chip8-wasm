<!doctypehtml><html><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><style>body{background-color:#000;color:#fff;box-sizing:border-box;margin:0;padding:2em;width:100%}#screen{position:relative}#canvas{border:1px dotted #0f0;display:block;margin:auto}#loadroms{position:absolute;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%}#stdout{height:16em;overflow:auto;border:1px dotted #fff}</style></head><body><div id=screen><canvas id=canvas oncontextmenu=event.preventDefault()></canvas><div id=loadroms><div><p>Load from file:</p><input id=fileloader onchange=open_file(event) type=file><p>Example Roms:</p><button id=startbutton>tetris_reassembled</button></div></div></div><pre id=stdout></pre><script>const stdout=document.querySelector("#stdout");stdout.textContent+="STDOUT:\n";var Module={canvas:document.getElementById("canvas"),print:e=>{stdout.textContent+=e+"\n"}};chip8_load_rom=e=>{const t=new Uint8Array(e),n=t.length*t.BYTES_PER_ELEMENT,o=Module._malloc(n),l=new Uint8Array(Module.HEAPU8.buffer,o,n);l.set(t),console.log("num_bytes"),console.log(n);Module.ccall("jscallback","number",["number","number"],[l.byteOffset,t.length])&&(document.querySelector("#loadroms").style.display="none"),Module._free(o)};let button=document.querySelector("#startbutton");button.onclick=()=>{fetch("/tetris_reassembled_ch8/tetris_reassembled.ch8").then((e=>e.arrayBuffer())).then((e=>{const t=new Uint8Array(e),n=t.length*t.BYTES_PER_ELEMENT,o=Module._malloc(n),l=new Uint8Array(Module.HEAPU8.buffer,o,n);l.set(t),console.log("num_bytes"),console.log(n);Module.ccall("jscallback","number",["number","number"],[l.byteOffset,t.length]);Module._free(o)}))};const open_file=function(e){const t=new FileReader;t.onload=e=>{chip8_load_rom(e.target.result)},t.readAsArrayBuffer(e.target.files[0])}</script><script async src=index.js></script></body></html>